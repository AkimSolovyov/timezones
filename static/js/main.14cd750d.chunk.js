(this.webpackJsonptimezones=this.webpackJsonptimezones||[]).push([[0],{33:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(5),r=c(2),s=c(1),i=c.n(s),o=c(8),l=c(6),d=c(3),u=c(18),j=c(19),b=c(20),m=c.n(b),O=c(4),f=function(){return Object(n.jsx)("div",{className:"text-center",children:Object(n.jsx)("div",{className:"spinner-grow text-success",style:{width:"2rem",height:"2rem"},role:"status",children:Object(n.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},g=function(e){var t=e.type,c="success"===t?" alert-success":"warning"===t?" alert-warning":" alert-danger";return Object(n.jsx)("div",{className:"alert ".concat(c," col-lg-8 col-md-12 mx-auto"),role:"alert",children:e.children})},p=c(15),h=c.n(p),x=c(21),v="GET_CITY",y="GET_CITY_SUCCESS",N="GET_CITY_FAILURE",T="DELETE_CITY",w="CHANGE_CITIES_ORDER",S=function(e){return{type:y,payload:e}},D=function(e){return{type:N,payload:e}};var C=c(10),E=function(){var e=Object(s.useState)(""),t=Object(O.a)(e,2),c=t[0],a=t[1],r=Object(s.useState)(""),i=Object(O.a)(r,2),o=i[0],l=i[1],u=Object(d.c)((function(e){return e.app.loading})),j=Object(d.c)((function(e){return e.app.error})),b=Object(d.c)((function(e){return e.app.lastAdded})),m=Object(d.b)();return Object(s.useEffect)((function(){var e;b&&l((e=b.time,C.DateTime.fromSQL(e).toFormat("TT")))}),[b]),Object(n.jsxs)("section",{className:"pt-5 text-center container",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-lg-6 col-md-8 mx-auto",children:Object(n.jsx)("h3",{className:"fw-light",children:"Enter a city name"})})}),Object(n.jsxs)("form",{className:"row py-3 d-flex justify-content-center",onSubmit:function(e){var t;(e.preventDefault(),c.length)?(m((t=c,function(){var e=Object(x.a)(h.a.mark((function e(c){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:v}),e.prev=1,e.next=4,fetch("".concat("http://api.worldweatheronline.com/premium/v1/tz.ashx","?key=").concat("c8fba3dd9e7f40cd892193551211601","&q=").concat(t,"&format=json"));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,c(S(a)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),c(D("Something gone wrong"));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())),a("")):m(D("City name cannot be empty!"))},children:[Object(n.jsx)("div",{className:"col-auto",children:Object(n.jsx)("input",{className:"form-control",placeholder:"City...",onChange:function(e){e.persist(),a((function(t){return e.target.value}))},value:c})}),Object(n.jsx)("div",{className:"col-auto",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-success mb-3",children:"Submit"})})]}),Object(n.jsxs)("div",{className:"row",children:[!!u&&Object(n.jsx)(f,{}),j&&!u&&Object(n.jsx)(g,{children:j}),!j&&!u&&b&&Object(n.jsxs)(g,{type:"success",children:[Object(n.jsx)("h5",{children:"Success! New item was added:"}),Object(n.jsxs)("ul",{className:"list-inline",children:[Object(n.jsxs)("li",{className:"list-inline-item",children:[Object(n.jsx)("strong",{children:"City:"})," ",b.city]}),Object(n.jsxs)("li",{className:"list-inline-item",children:[Object(n.jsx)("strong",{children:"TZ Offset:"})," ",b.TZOffset]}),Object(n.jsxs)("li",{className:"list-inline-item",children:[Object(n.jsx)("strong",{children:"Time:"})," ",Object(n.jsx)("time",{children:o})]})]})]})]})]})},F=function(e){var t=e.timer,c=e.offset,a=Object(s.useState)(!1),r=Object(O.a)(a,2),i=r[0],o=r[1],l=Object(s.useRef)(null),d=function(e,t){var c=60*t;return e.time.plus({minutes:c})}(t,c);return Object(s.useEffect)((function(){var e=setTimeout((function(){i&&l.current.focus()}),300);return function(){clearTimeout(e)}}),[i]),Object(n.jsx)("span",{children:i?Object(n.jsx)("input",{className:"form-control form-control-sm",type:"time",style:{display:"inline",width:"auto"},onBlur:function(e){var n=e.target.value.split(":"),a=n[0],r=n[1],s=new Date;s.setHours(Number(a),Number(r));var i=new Date(s.getTime()-60*c*6e4);e.target.value?t.setTime(t.time.set({hours:i.getHours(),minutes:i.getMinutes(),seconds:0})):t.setTime(t.time.set({hours:t.time.hours,minutes:t.time.minutes,seconds:0})),o((function(e){return!e}))},ref:l}):Object(n.jsx)("span",{onClick:function(){o((function(e){return!e}))},children:d.toFormat("HH:mm:ss")})})},I=function(e){var t=e.item,c=e.timer,a=t.city,r=t.TZOffset,s=(t.time,Object(d.b)());return Object(n.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(n.jsx)("div",{className:"p-2 col-sm-6 text-start",children:Object(n.jsx)("strong",{children:a})}),Object(n.jsxs)("div",{className:"p-2 col-sm text-start",children:[Object(n.jsx)("strong",{children:"UTC offset:"})," ",r]}),Object(n.jsx)("div",{className:"p-2 col-sm text-start",children:Object(n.jsxs)("div",{children:[Object(n.jsx)("strong",{children:"Time:"})," ",Object(n.jsx)(F,{timer:c,offset:r})]})}),Object(n.jsx)("div",{className:"p-2 text-start",children:Object(n.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:function(){s(function(e){return{type:T,payload:e}}(a))},children:Object(n.jsx)("i",{className:"bi bi-trash",style:{fontSize:"1rem",color:"inherit",position:"relative",bottom:"1px"}})})})]})},_=function(e){var t=e.items,c=e.timer,i=Object(s.useState)([]),o=Object(O.a)(i,2),l=o[0],u=o[1],j=Object(s.useState)({draggedFrom:null,draggedTo:null,isDragging:!1,originalOrder:[],updatedOrder:[]}),b=Object(O.a)(j,2),m=b[0],f=b[1],g=Object(d.b)(),p=function(e){var t=Number(e.currentTarget.dataset.position);f(Object(r.a)(Object(r.a)({},m),{},{draggedFrom:t,isDragging:!0,originalOrder:l})),e.dataTransfer.setData("text/html","")},h=function(e){e.preventDefault();var t=m.originalOrder,c=m.draggedFrom,n=Number(e.currentTarget.dataset.position),s=t[c],i=t.filter((function(e,t){return t!==c}));t=[].concat(Object(a.a)(i.slice(0,n)),[s],Object(a.a)(i.slice(n))),n!==m.draggedTo&&f(Object(r.a)(Object(r.a)({},m),{},{updatedOrder:t,draggedTo:n}))},x=function(e){var t;u(m.updatedOrder),g((t=m.updatedOrder,{type:w,payload:t})),f(Object(r.a)(Object(r.a)({},m),{},{draggedFrom:null,draggedTo:null,isDragging:!1}))},v=function(){f(Object(r.a)(Object(r.a)({},m),{},{draggedTo:null}))};return Object(s.useEffect)((function(){u(t)}),[t]),Object(n.jsx)("ul",{className:"list-group",children:l.map((function(e,t){var a,r=(a=t,"list-group-item\n              ".concat(m&&m.draggedTo===Number(a)?" dropArea":"","\n              ").concat(m.isDragging&&m.draggedFrom===Number(a)?" active":""));return Object(n.jsx)("li",{"data-position":t,draggable:!0,onDragStart:p,onDragOver:h,onDrop:x,onDragLeave:v,className:r,style:{cursor:m.isDragging&&m.draggedFrom===Number(t)?"default":"grab"},children:Object(n.jsx)(I,{item:e,timer:c})},t)}))})};var z=function(e){var t=Object(s.useState)(e),c=Object(O.a)(t,2),n=c[0],a=c[1];return Object(s.useEffect)((function(){var e=setInterval((function(){a(n.plus({seconds:1}))}),1e3);return function(){clearInterval(e)}})),{time:n,setTime:a}},k=function(e){var t=Object(d.c)((function(e){return e.app.cities})),c=z(C.DateTime.local().toUTC());return Object(n.jsx)("section",{className:"py-5 text-center container",children:Object(n.jsx)("div",{className:"row",children:!!t&&Object(n.jsx)("div",{className:"col-lg-12 mx-auto",children:Object(n.jsx)(_,{items:t,timer:c})})})})};var A=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("header",{children:Object(n.jsx)("div",{className:"bg-dark",id:"navbarHeader",children:Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-sm-12 py-3",children:Object(n.jsx)("h4",{className:"text-white",children:"Timezones"})})})})})}),Object(n.jsxs)("main",{className:"app",children:[Object(n.jsx)(E,{}),Object(n.jsx)(k,{})]})]})},L={cities:[],lastAdded:"",loading:!1,error:""};var H=Object(l.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(r.a)(Object(r.a)({},e),{},{loading:!0,lastAdded:""});case y:return{cities:[].concat(Object(a.a)(e.cities),[{city:t.payload.data.request[0].query,TZOffset:t.payload.data.time_zone[0].utcOffset,time:t.payload.data.time_zone[0].localtime}]),lastAdded:{city:t.payload.data.request[0].query,TZOffset:t.payload.data.time_zone[0].utcOffset,time:t.payload.data.time_zone[0].localtime},loading:!1,error:!1};case N:return Object(r.a)(Object(r.a)({},e),{},{loading:!1,error:t.payload,lastAdded:""});case T:return Object(r.a)(Object(r.a)({},L),{},{cities:Object(a.a)(e.cities.filter((function(e){return e.city!==t.payload})))});case w:return Object(r.a)(Object(r.a)({},L),{},{cities:Object(a.a)(t.payload)});default:return e}}}),q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,35)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))},R=(c(33),function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}()),Z=Object(l.createStore)(H,R,Object(j.composeWithDevTools)(Object(l.applyMiddleware)(u.a)));Z.subscribe(m()((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(c){}}({app:Object(r.a)(Object(r.a)({},L),{},{cities:Object(a.a)(Z.getState().app.cities)})})}),1e3));var G=Object(n.jsx)(d.a,{store:Z,children:Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(A,{})})});Object(o.render)(G,document.getElementById("root")),q()}},[[34,1,2]]]);